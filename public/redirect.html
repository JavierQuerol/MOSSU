<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Redirigiendo a la app...</title>
  <link rel="stylesheet" href="style.css">
  <script>
    function redirectAndClose() {
      const params = new URLSearchParams(window.location.search);
      const token = params.get("token");
      const user = params.get("user");

      if (token && user) {
        // Abrir la app macOS
        window.location.href = `mossu://oauth?token=${encodeURIComponent(token)}&user=${encodeURIComponent(user)}`;

        // Intentar cerrar la ventana tras 2 segundos
        setTimeout(() => {
          window.open('', '_self');
          window.close();
        }, 10000);
      } else {
        document.body.innerText = "Faltan parámetros en la redirección.";
      }
    }
    window.onload = redirectAndClose;
  </script>
</head>
<body>
<div class="bg-container"></div>
    <div class="bg-dots"></div>
    <div class="grid-overlay"></div>
    
    <div class="floating-particles">
        <!-- Grupo 1: Estrellas pequeñas rápidas -->
        <div class="particle star-1" style="left: 5%; animation-delay: 0s;"></div>
        <div class="particle star-1" style="left: 15%; animation-delay: -1s;"></div>
        <div class="particle star-1" style="left: 25%; animation-delay: -2s;"></div>
        <div class="particle star-1" style="left: 35%; animation-delay: -3s;"></div>
        <div class="particle star-1" style="left: 45%; animation-delay: -4s;"></div>
        <div class="particle star-1" style="left: 55%; animation-delay: -5s;"></div>
        <div class="particle star-1" style="left: 65%; animation-delay: -1.5s;"></div>
        <div class="particle star-1" style="left: 75%; animation-delay: -2.5s;"></div>
        <div class="particle star-1" style="left: 85%; animation-delay: -3.5s;"></div>
        <div class="particle star-1" style="left: 95%; animation-delay: -4.5s;"></div>
        
        <!-- Grupo 2: Estrellas medianas -->
        <div class="particle star-2" style="left: 8%; animation-delay: -0.5s;"></div>
        <div class="particle star-2" style="left: 18%; animation-delay: -1.5s;"></div>
        <div class="particle star-2" style="left: 28%; animation-delay: -2.5s;"></div>
        <div class="particle star-2" style="left: 38%; animation-delay: -3.5s;"></div>
        <div class="particle star-2" style="left: 48%; animation-delay: -4.5s;"></div>
        <div class="particle star-2" style="left: 58%; animation-delay: -5.5s;"></div>
        <div class="particle star-2" style="left: 68%; animation-delay: -1.2s;"></div>
        <div class="particle star-2" style="left: 78%; animation-delay: -2.2s;"></div>
        <div class="particle star-2" style="left: 88%; animation-delay: -3.2s;"></div>
        <div class="particle star-2" style="left: 98%; animation-delay: -4.2s;"></div>
        
        <!-- Grupo 3: Estrellas azules -->
        <div class="particle star-3" style="left: 3%; animation-delay: -0.8s;"></div>
        <div class="particle star-3" style="left: 13%; animation-delay: -1.8s;"></div>
        <div class="particle star-3" style="left: 23%; animation-delay: -2.8s;"></div>
        <div class="particle star-3" style="left: 33%; animation-delay: -3.8s;"></div>
        <div class="particle star-3" style="left: 43%; animation-delay: -4.8s;"></div>
        <div class="particle star-3" style="left: 53%; animation-delay: -0.3s;"></div>
        <div class="particle star-3" style="left: 63%; animation-delay: -1.3s;"></div>
        <div class="particle star-3" style="left: 73%; animation-delay: -2.3s;"></div>
        <div class="particle star-3" style="left: 83%; animation-delay: -3.3s;"></div>
        <div class="particle star-3" style="left: 93%; animation-delay: -4.3s;"></div>
        
        <!-- Grupo 4: Estrellas grandes -->
        <div class="particle star-4" style="left: 10%; animation-delay: -1.2s;"></div>
        <div class="particle star-4" style="left: 20%; animation-delay: -2.2s;"></div>
        <div class="particle star-4" style="left: 30%; animation-delay: -3.2s;"></div>
        <div class="particle star-4" style="left: 40%; animation-delay: -4.2s;"></div>
        <div class="particle star-4" style="left: 50%; animation-delay: -5.2s;"></div>
        <div class="particle star-4" style="left: 60%; animation-delay: -0.7s;"></div>
        <div class="particle star-4" style="left: 70%; animation-delay: -1.7s;"></div>
        <div class="particle star-4" style="left: 80%; animation-delay: -2.7s;"></div>
        <div class="particle star-4" style="left: 90%; animation-delay: -3.7s;"></div>
        
        <!-- Grupo 5: Estrellas rosas -->
        <div class="particle star-5" style="left: 7%; animation-delay: -0.4s;"></div>
        <div class="particle star-5" style="left: 17%; animation-delay: -1.4s;"></div>
        <div class="particle star-5" style="left: 27%; animation-delay: -2.4s;"></div>
        <div class="particle star-5" style="left: 37%; animation-delay: -3.4s;"></div>
        <div class="particle star-5" style="left: 47%; animation-delay: -4.4s;"></div>
        <div class="particle star-5" style="left: 57%; animation-delay: -5.4s;"></div>
        <div class="particle star-5" style="left: 67%; animation-delay: -0.9s;"></div>
        <div class="particle star-5" style="left: 77%; animation-delay: -1.9s;"></div>
        <div class="particle star-5" style="left: 87%; animation-delay: -2.9s;"></div>
        <div class="particle star-5" style="left: 97%; animation-delay: -3.9s;"></div>
        
        <!-- Grupo 6: Estrellas azul claro -->
        <div class="particle star-6" style="left: 12%; animation-delay: -0.6s;"></div>
        <div class="particle star-6" style="left: 22%; animation-delay: -1.6s;"></div>
        <div class="particle star-6" style="left: 32%; animation-delay: -2.6s;"></div>
        <div class="particle star-6" style="left: 42%; animation-delay: -3.6s;"></div>
        <div class="particle star-6" style="left: 52%; animation-delay: -4.6s;"></div>
        <div class="particle star-6" style="left: 62%; animation-delay: -5.6s;"></div>
        <div class="particle star-6" style="left: 72%; animation-delay: -0.1s;"></div>
        <div class="particle star-6" style="left: 82%; animation-delay: -1.1s;"></div>
        <div class="particle star-6" style="left: 92%; animation-delay: -2.1s;"></div>
        
        <!-- Estrellas brillantes especiales -->
        <div class="particle star-bright" style="left: 25%; animation-delay: -2s;"></div>
        <div class="particle star-bright" style="left: 55%; animation-delay: -4s;"></div>
        <div class="particle star-bright" style="left: 75%; animation-delay: -6s;"></div>
        <div class="particle star-bright" style="left: 45%; animation-delay: -8s;"></div>
        <div class="particle star-bright" style="left: 85%; animation-delay: -10s;"></div>
        
        <!-- Estrellas con parpadeo -->
        <div class="particle star-2 twinkle" style="left: 14%; animation-delay: -1s;"></div>
        <div class="particle star-3 twinkle" style="left: 34%; animation-delay: -3s;"></div>
        <div class="particle star-4 twinkle" style="left: 54%; animation-delay: -5s;"></div>
        <div class="particle star-5 twinkle" style="left: 74%; animation-delay: -7s;"></div>
        <div class="particle star-6 twinkle" style="left: 94%; animation-delay: -9s;"></div>
        <div class="particle star-1 twinkle" style="left: 6%; animation-delay: -2s;"></div>
        <div class="particle star-2 twinkle" style="left: 26%; animation-delay: -4s;"></div>
        <div class="particle star-3 twinkle" style="left: 46%; animation-delay: -6s;"></div>
        <div class="particle star-4 twinkle" style="left: 66%; animation-delay: -8s;"></div>
        <div class="particle star-5 twinkle" style="left: 86%; animation-delay: -10s;"></div>
        
        <!-- Más estrellas adicionales para densidad -->
        <div class="particle star-1" style="left: 1%; animation-delay: -0.2s;"></div>
        <div class="particle star-2" style="left: 11%; animation-delay: -1.3s;"></div>
        <div class="particle star-3" style="left: 21%; animation-delay: -2.7s;"></div>
        <div class="particle star-4" style="left: 31%; animation-delay: -3.9s;"></div>
        <div class="particle star-5" style="left: 41%; animation-delay: -4.1s;"></div>
        <div class="particle star-6" style="left: 51%; animation-delay: -5.3s;"></div>
        <div class="particle star-1" style="left: 61%; animation-delay: -0.8s;"></div>
        <div class="particle star-2" style="left: 71%; animation-delay: -1.9s;"></div>
        <div class="particle star-3" style="left: 81%; animation-delay: -2.4s;"></div>
        <div class="particle star-4" style="left: 91%; animation-delay: -3.6s;"></div>
        
        <!-- Estrellas fugaces -->
        <div class="shooting-star" style="left: 20%; top: 20%; animation-delay: 0s;"></div>
        <div class="shooting-star" style="left: 60%; top: 40%; animation-delay: -8s;"></div>
        <div class="shooting-star" style="left: 80%; top: 10%; animation-delay: -15s;"></div>
        <div class="shooting-star" style="left: 10%; top: 70%; animation-delay: -22s;"></div>
        <div class="shooting-star" style="left: 40%; top: 60%; animation-delay: -29s;"></div>
    </div>
	<div class="content">
	    <img src="icon.png" alt="Icono de MOSSU" style="width: 200px; height: 200px;" />
			<h1 class="title">Redirigiendo a MOSSU...</h1>
			<h3 class="subtitle">Puedes cerrar esta ventana</h3>
	  </div>
</body>
</html>
